!function($){$.fn.editable=function(t,e){if("disable"==t)return void $(this).data("disabled.editable",!0);if("enable"==t)return void $(this).data("disabled.editable",!1);if("destroy"==t)return void $(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");var a=$.extend({},$.fn.editable.defaults,{target:t},e),i=$.editable.types[a.type].plugin||function(){},n=$.editable.types[a.type].submit||function(){},l=$.editable.types[a.type].buttons||$.editable.types.defaults.buttons,s=$.editable.types[a.type].content||$.editable.types.defaults.content,o=$.editable.types[a.type].element||$.editable.types.defaults.element,d=$.editable.types[a.type].reset||$.editable.types.defaults.reset,r=a.callback||function(){},p=a.onedit||function(){},u=a.onsubmit||function(){},c=a.onreset||function(){},h=a.onerror||d;return a.tooltip&&$(this).attr("title",a.tooltip),a.autowidth="auto"==a.width,a.autoheight="auto"==a.height,this.each(function(){var t=this,e=$(t).width(),y=$(t).height();$(this).data("event.editable",a.event),$.trim($(this).html())||$(this).html(a.placeholder),$(this).bind(a.event,function(c){if(!0!==$(this).data("disabled.editable")&&!t.editing&&!1!==p.apply(this,[a,t])){c.preventDefault(),c.stopPropagation(),a.tooltip&&$(t).removeAttr("title"),0==$(t).width()?(a.width=e,a.height=y):("none"!=a.width&&(a.width=a.autowidth?$(t).width():a.width),"none"!=a.height&&(a.height=a.autoheight?$(t).height():a.height)),$(this).html().toLowerCase().replace(/(;|")/g,"")==a.placeholder.toLowerCase().replace(/(;|")/g,"")&&$(this).html(""),t.editing=!0,t.revert=$(t).html(),$(t).html("");var b=$("<form />");a.cssclass&&("inherit"==a.cssclass?b.attr("class",$(t).attr("class")):b.attr("class",a.cssclass)),a.style&&("inherit"==a.style?(b.attr("style",$(t).attr("style")),b.css("display",$(t).css("display"))):b.attr("style",a.style));var f,m=o.apply(b,[a,t]);if(a.loadurl){var v=setTimeout(function(){m.disabled=!0,s.apply(b,[a.loadtext,a,t])},100),g={};g[a.id]=t.id,$.isFunction(a.loaddata)?$.extend(g,a.loaddata.apply(t,[t.revert,a])):$.extend(g,a.loaddata),$.ajax({type:a.loadtype,url:a.loadurl,data:g,async:!1,success:function(t){window.clearTimeout(v),f=t,m.disabled=!1}})}else a.data?(f=a.data,$.isFunction(a.data)&&(f=a.data.apply(t,[t.revert,a]))):f=t.revert;s.apply(b,[f,a,t]),m.attr("name",a.name),l.apply(b,[a,t]),$(t).append(b),i.apply(b,[a,t]),$(":input:visible:enabled:first",b).focus(),a.select&&m.select(),m.keydown(function(e){27==e.keyCode&&(e.preventDefault(),d.apply(b,[a,t]))});var v;m.blur("cancel"==a.onblur?function(){v=setTimeout(function(){d.apply(b,[a,t])},500)}:"submit"==a.onblur?function(){v=setTimeout(function(){b.submit()},200)}:$.isFunction(a.onblur)?function(){a.onblur.apply(t,[m.val(),a])}:function(){}),b.submit(function(e){if(v&&clearTimeout(v),e.preventDefault(),!1!==u.apply(b,[a,t])&&!1!==n.apply(b,[a,t]))if($.isFunction(a.target)){var i=a.target.apply(t,[m.val(),a]);$(t).html(i),t.editing=!1,r.apply(t,[t.innerHTML,a]),$.trim($(t).html())||$(t).html(a.placeholder)}else{var l={},s=a.token;l[a.name]=m.val(),l[a.id]=t.id,$.isFunction(a.submitdata)?$.extend(l,a.submitdata.apply(t,[t.revert,a])):$.extend(l,a.submitdata),"PUT"==a.method&&(l._method="put"),$(t).html(a.indicator);var o={type:"POST",data:{submitdata:l,_token:s},dataType:"html",url:a.target,success:function(e){"html"==o.dataType&&$(t).html(e),t.editing=!1,r.apply(t,[e,a]),$.trim($(t).html())||$(t).html(a.placeholder)},error:function(e){h.apply(b,[a,t,e])}};$.extend(o,a.ajaxoptions),$.ajax(o)}return $(t).attr("title",a.tooltip),!1})}}),this.reset=function(e){this.editing&&!1!==c.apply(e,[a,t])&&($(t).html(t.revert),t.editing=!1,$.trim($(t).html())||$(t).html(a.placeholder),a.tooltip&&$(t).attr("title",a.tooltip))}})},$.editable={types:{defaults:{element:function(){var t=$('<input type="hidden"></input>');return $(this).append(t),t},content:function(t){$(":input:first",this).val(t)},reset:function(t,e){e.reset(this)},buttons:function(t,e){var a=this;if(t.submit){if(t.submit.match(/>$/))var i=$(t.submit).click(function(){"submit"!=i.attr("type")&&a.submit()});else{var i=$('<button class="btn btn-primary" type="submit" /> ');i.html(t.submit)}$(this).append(i)}if(t.cancel){if(t.cancel.match(/>$/))var n=$(t.cancel);else{var n=$('<button class="btn btn-danger" type="cancel" />');n.html(t.cancel)}$(this).append(n),$(n).click(function(){if($.isFunction($.editable.types[t.type].reset))var i=$.editable.types[t.type].reset;else var i=$.editable.types.defaults.reset;return i.apply(a,[t,e]),!1})}}},text:{element:function(t){var e=$("<input />");return"none"!=t.width&&e.width(t.width),"none"!=t.height&&e.height(t.height),e.attr("autocomplete","off"),$(this).append(e),e}},textarea:{element:function(t){var e=$("<textarea />");return t.rows?e.attr("rows",t.rows):"none"!=t.height&&e.height(t.height),t.cols?e.attr("cols",t.cols):"none"!=t.width&&e.width(t.width),$(this).append(e),e}},select:{element:function(){var t=$("<select />");t.addClass("form-control").css({"padding": "5px","width":"80"});return $(this).append(t),t},content:function(data,settings,original){if(String==data.constructor)eval("var json = "+data);else var json=data;for(var key in json)if(json.hasOwnProperty(key)&&"selected"!=key){var option=$("<option />").val(key).append(json[key]);$("select",this).append(option)}$("select",this).children().each(function(){($(this).val()==json.selected||$(this).text()==$.trim(original.revert))&&$(this).attr("selected","selected")})}}},addInputType:function(t,e){$.editable.types[t]=e}},$.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"",loaddata:{},submitdata:{},token:"",ajaxoptions:{}}}(jQuery);